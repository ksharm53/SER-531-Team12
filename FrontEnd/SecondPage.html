<!DOCTYPE html>
<html>
    <head>
        <title>SDFC</title>
         <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css">
        <style>
            .center {
     margin: auto;
     margin-top: 3%;
    width: 60%;
    /* border: 3px solid #73AD21; */
    padding: 10px;
    }
    .info {
        color: rgb(0, 0, 0);
     margin: auto;
     /* margin-top: 10%; */
    width: 40%;
    /* border: 3px solid #73AD21; */
    padding: 10px;
    }
            button {
                      background-color: #043A06; /* Green */
                      border: none;
                      color: white;
                      padding: 15px 32px;
                      text-align: center;
                      text-decoration: none;
                      display: inline-block;
                      font-size: 16px;
                      margin: 4px 2px;
                      cursor: pointer;
                      background-color: white;
                      color: black;
                      border: 2px solid #4CAF50;
                    }
        </style>
        <script>
        $(document).ready(function() {
            $('#table_id').DataTable();
        });
        function addRows( col1, col2, col3){
            var t = $('#table_id').DataTable();
            t.row.add( [
                col1,
                col2,
                col3,
                ] ).draw( false );
        }
        function clearTable(){
            var table = $('#table_id').DataTable();
            //clear datatable
            table.clear().draw();
        }
        function queryData(que){
                clearTable()
                $.ajax({
                    type : "GET",
                    url: "http://ec2-54-213-100-245.us-west-2.compute.amazonaws.com:3030/SDFC/sparql?query="+que,
                    success: function(response){
                        console.log("aayaaa");
                        //console.log(response);
                        const map = response.head.vars;
                        console.log(map)
                        var values = response.results.bindings;
                        console.log(values)
                        console.log(values.length)
                        console.log("Inner Values+ KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK");
                        for(var i=0; i<values.length; i++){
                                    console.log(values[i][map[0]].value);
                                    console.log(values[i][map[1]].value);
                                    console.log(values[i][map[2]].value);
                                    var col1 = values[i][map[0]].value;
                                    var col2 = values[i][map[1]].value;
                                    var col3 = values[i][map[2]].value;
                                    addRows(col1,col2,col3)
                        }
                    }
            });
        }
        function queryPlayer(){
            var query = "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns%23>PREFIX owl: <http://www.w3.org/2002/07/owl%23>PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema%23>PREFIX xsd: <http://www.w3.org/2001/XMLSchema%23>PREFIX sdfc: <http://www.semanticweb.org/jaypatel/ontologies/2022/10/SDFC%23>SELECT * WHERE{ ?indv a sdfc:TRANDATE . ?indv sdfc:hasTranDate ?trandate . ?indv sdfc:hasAvgLenStay ?avgstay .}";
            queryData(query);
        }
        function queryTournament(){
            var query = "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns%23>PREFIX owl: <http://www.w3.org/2002/07/owl%23>PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema%23>PREFIX xsd: <http://www.w3.org/2001/XMLSchema%23>PREFIX sdfc: <http://www.semanticweb.org/jaypatel/ontologies/2022/10/SDFC%23>SELECT ?tdate ?freq ?peoplecount WHERE{     ?trandate a sdfc:TRANDATE .     ?trandate sdfc:hasPeopleCount ?peoplecount .     ?peoplecount sdfc:hasFreq ?freq .    ?trandate sdfc:hasTranDate ?tdate .    FILTER(?freq > 100 )    }";
            queryData(query);
        }
        function queryCountryTeam(){
            var query = "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns%23>PREFIX owl: <http://www.w3.org/2002/07/owl%23>PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema%23>PREFIX xsd: <http://www.w3.org/2001/XMLSchema%23>PREFIX sdfc: <http://www.semanticweb.org/jaypatel/ontologies/2022/10/SDFC%23>SELECT ?tdate ?freq ?peoplecount WHERE { ?trandate a sdfc:TRANDATE . ?trandate sdfc:hasHour ?hour . ?trandate sdfc:hasPeopleCount ?peoplecount . ?peoplecount sdfc:hasFreq ?freq . ?trandate sdfc:hasTranDate ?tdate . }";
            queryData(query);
        }
        function queryDate(){
            var query = "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns%23>PREFIX owl: <http://www.w3.org/2002/07/owl%23>PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema%23>PREFIX xsd: <http://www.w3.org/2001/XMLSchema%23>PREFIX sdfc: <http://www.semanticweb.org/jaypatel/ontologies/2022/10/SDFC%23>SELECT ?freq ?trandate ?difference WHERE{ ?indv a sdfc:TRANDATE . ?indv sdfc:hasTranDate ?trandate . ?indv sdfc:hasPeopleCount ?freq . ?freq sdfc:hasPrevFreq ?prevfrequency . ?freq sdfc:hasPrevFreq2 ?prevfrequency2 . BIND(?prevfrequency - ?prevfrequency2 as ?difference) }";
            queryData(query);
        }
        function queryEvent(){
            var query = "PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns%23>PREFIX owl: <http://www.w3.org/2002/07/owl%23>PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema%23>PREFIX xsd: <http://www.w3.org/2001/XMLSchema%23>PREFIX sdfc: <http://www.semanticweb.org/jaypatel/ontologies/2022/10/SDFC%23>SELECT ?trandate ?hours ?open WHERE{ ?indv a sdfc:TRANDATE . ?indv sdfc:hasTranDate ?trandate . ?indv sdfc:hasHour ?hours . ?indv sdfc:isOpen ?open . FILTER(?open=True). }";
            queryData(query);
        }
        function queryRuns(){
            var query = "SELECT ?subject ?predicate ?object WHERE {?subject ?predicate ?object}LIMIT 25";
            queryData(query);
        }
        </script>
    </head>
    <body  style="background-color: rgb(160, 159, 155);">
    <div class="info">
        <h1>Sun Devil Fitness Center</h1>
    </div>

      

    <div class="center">
        <button id="player" title="Query 1: The avg length of stay for the TRANDATE" onclick="queryPlayer()">Query1</button>
        <button id="player" title="Query 2: The trandate where the frequency of the given hours is greater than
        100." onclick="queryTournament()">Query 2</button>
        <button id="player" title="Query 3: Find the frequency and hour for the given TRANDATE" onclick="queryCountryTeam()">Query 3</button>
        <button id="player" title="Query 4: For the given TRANDATE, find the amount by which prevFreq has grown" onclick="queryDate()">Query 4</button>
        <button id="player" title="Query 5: Find the list of TRANDATE and hours for which the gym is open for a
        specific TRANDATE" onclick="queryEvent()">Query 5</button>
        <button id="player" title="N-triples: To generate N-triples for out OWL file." onclick="queryRuns()">N-Triples</button>
    </div>
        <br>
        <br>
        <table id="table_id" class="table table-striped" style="width:100%">
            <thead>
                <tr>
                    <th>Subject</th>
                    <th>Predicate</th>
                    <th>Object</th>
                </tr>
            </thead>
            <tbody>
              </tbody>
        </table>
    </body>
</html>